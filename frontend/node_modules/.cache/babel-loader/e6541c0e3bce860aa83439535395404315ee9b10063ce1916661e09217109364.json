{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./VendorStore.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VendorStore=_ref=>{let{vendorName,sellerId,onViewProduct,onAddToCart,onToggleWishlist,wishlistItems,cartItems,navigateTo}=_ref;const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchVendorProducts=async()=>{if(!vendorName&&!sellerId){setProducts([]);setLoading(false);return;}setLoading(true);try{let url;if(sellerId){url=\"http://localhost:5000/api/products?sellerId=\".concat(encodeURIComponent(sellerId));}else{url=\"http://localhost:5000/api/products?vendor=\".concat(encodeURIComponent(vendorName),\"&status=approved\");}const res=await fetch(url);if(!res.ok)throw new Error('Failed to fetch vendor products');const data=await res.json();setProducts(Array.isArray(data)?data:[]);setError(null);}catch(err){console.error('Error fetching vendor products:',err);setError('Unable to load vendor products');setProducts([]);}finally{setLoading(false);}};fetchVendorProducts();},[vendorName,sellerId]);const getImageSrc=image=>{if(!image)return'https://via.placeholder.com/200x150?text=No+Image';if(image.startsWith('http'))return image;if(image.includes('-')&&/^\\d+-/.test(image))return\"http://localhost:5000/uploads/\".concat(image);return\"/IMAGES/\".concat(image);};const handleVisitSellerDashboard=()=>{// Navigate to the seller's dashboard if sellerId is available\n// This would typically require the current user to be the seller or an admin\nif(sellerId){console.log('Visiting seller dashboard for sellerId:',sellerId);// You can dispatch an event or use navigateTo if available\nwindow.dispatchEvent(new CustomEvent('visitSellerDashboard',{detail:{sellerId}}));}else{alert('Seller information not available');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-store-page container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"vendor-store-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-top\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:vendorName||'Vendor Store'}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Products by \",vendorName]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleVisitSellerDashboard,className:\"visit-seller-btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tachometer-alt\"}),\" Visit Seller Dashboard\"]})]})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading products...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),!loading&&!error&&products.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-products\",children:\"No approved products available for this vendor.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"vendor-products-grid\",children:products.map(p=>{var _p$price;return/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-product-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:getImageSrc(p.image),alt:p.name,onError:e=>e.target.src='https://via.placeholder.com/200x150?text=No+Img'}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-product-body\",children:[/*#__PURE__*/_jsx(\"h4\",{children:p.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"vendor-product-vendor\",children:[\"by \",p.vendor]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-product-price\",children:[\"\\u20B9\",(_p$price=p.price)===null||_p$price===void 0?void 0:_p$price.toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-product-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewProduct&&onViewProduct(p),className:\"btn\",children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onAddToCart&&onAddToCart(p),className:\"btn secondary\",children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onToggleWishlist&&onToggleWishlist(p),className:\"wishlist \".concat(wishlistItems&&wishlistItems.find(i=>(i._id||i.id)===(p._id||p.id))?'active':''),children:\"\\u2665\"})]})]})]},p._id||p.id);})})]});};export default VendorStore;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","VendorStore","_ref","vendorName","sellerId","onViewProduct","onAddToCart","onToggleWishlist","wishlistItems","cartItems","navigateTo","products","setProducts","loading","setLoading","error","setError","fetchVendorProducts","url","concat","encodeURIComponent","res","fetch","ok","Error","data","json","Array","isArray","err","console","getImageSrc","image","startsWith","includes","test","handleVisitSellerDashboard","log","window","dispatchEvent","CustomEvent","detail","alert","className","children","onClick","length","map","p","_p$price","src","alt","name","onError","e","target","vendor","price","toLocaleString","find","i","_id","id"],"sources":["C:/Users/User/Downloads/reactlatest303/reactlatest3/frontend/src/Customer/Categories/VendorStore.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './VendorStore.css';\r\n\r\nconst VendorStore = ({ vendorName, sellerId, onViewProduct, onAddToCart, onToggleWishlist, wishlistItems, cartItems, navigateTo }) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchVendorProducts = async () => {\r\n      if (!vendorName && !sellerId) {\r\n        setProducts([]);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      try {\r\n        let url;\r\n        if (sellerId) {\r\n          url = `http://localhost:5000/api/products?sellerId=${encodeURIComponent(sellerId)}`;\r\n        } else {\r\n          url = `http://localhost:5000/api/products?vendor=${encodeURIComponent(vendorName)}&status=approved`;\r\n        }\r\n        const res = await fetch(url);\r\n        if (!res.ok) throw new Error('Failed to fetch vendor products');\r\n        const data = await res.json();\r\n        setProducts(Array.isArray(data) ? data : []);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Error fetching vendor products:', err);\r\n        setError('Unable to load vendor products');\r\n        setProducts([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchVendorProducts();\r\n  }, [vendorName, sellerId]);\r\n\r\n  const getImageSrc = (image) => {\r\n    if (!image) return 'https://via.placeholder.com/200x150?text=No+Image';\r\n    if (image.startsWith('http')) return image;\r\n    if (image.includes('-') && /^\\d+-/.test(image)) return `http://localhost:5000/uploads/${image}`;\r\n    return `/IMAGES/${image}`;\r\n  };\r\n\r\n  const handleVisitSellerDashboard = () => {\r\n    // Navigate to the seller's dashboard if sellerId is available\r\n    // This would typically require the current user to be the seller or an admin\r\n    if (sellerId) {\r\n      console.log('Visiting seller dashboard for sellerId:', sellerId);\r\n      // You can dispatch an event or use navigateTo if available\r\n      window.dispatchEvent(new CustomEvent('visitSellerDashboard', { detail: { sellerId } }));\r\n    } else {\r\n      alert('Seller information not available');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"vendor-store-page container\">\r\n      <div className=\"vendor-store-header\">\r\n        <div className=\"header-top\">\r\n          <div>\r\n            <h2>{vendorName || 'Vendor Store'}</h2>\r\n            <p>Products by {vendorName}</p>\r\n          </div>\r\n          <button onClick={handleVisitSellerDashboard} className=\"visit-seller-btn\">\r\n            <i className=\"fas fa-tachometer-alt\"></i> Visit Seller Dashboard\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading && <div className=\"loading\">Loading products...</div>}\r\n      {error && <div className=\"error\">{error}</div>}\r\n\r\n      {!loading && !error && products.length === 0 && (\r\n        <div className=\"no-products\">No approved products available for this vendor.</div>\r\n      )}\r\n\r\n      <div className=\"vendor-products-grid\">\r\n        {products.map(p => (\r\n          <div key={p._id || p.id} className=\"vendor-product-card\">\r\n            <img src={getImageSrc(p.image)} alt={p.name} onError={(e)=> e.target.src='https://via.placeholder.com/200x150?text=No+Img'} />\r\n            <div className=\"vendor-product-body\">\r\n              <h4>{p.name}</h4>\r\n              <p className=\"vendor-product-vendor\">by {p.vendor}</p>\r\n              <div className=\"vendor-product-price\">₹{p.price?.toLocaleString()}</div>\r\n              <div className=\"vendor-product-actions\">\r\n                <button onClick={() => onViewProduct && onViewProduct(p)} className=\"btn\">View</button>\r\n                <button onClick={() => onAddToCart && onAddToCart(p)} className=\"btn secondary\">Add to Cart</button>\r\n                <button onClick={() => onToggleWishlist && onToggleWishlist(p)} className={`wishlist ${wishlistItems && wishlistItems.find(i=> (i._id||i.id) === (p._id||p.id)) ? 'active' : ''}`}>♥</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VendorStore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}